<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itheima.mapper.CustomerMapper">
    <select id="findCustomerByNameAndJobs"
            parameterType="com.itheima.pojo.Customer"
            resultType="com.itheima.pojo.Customer">
        SELECT * FROM customer where 1 = 1
        <choose>
            <when test="username !=null and username !=''">
                AND username LIKE CONCAT('%', #{username}, '%')
            </when>
            <when test="jobs != null and username != ''">
                AND jobs = #{jobs}
            </when>
            <otherwise>
                AND phone IS NOT NULL
            </otherwise>
        </choose>

            <!--    这里是用if语句 ⬇️    -->
<!--        &lt;!&ndash;    `WHERE 1 = 1`（❌会发生Sql注入）是为了避免`WHERE`关键字后面直接跟着`AND`    &ndash;&gt;-->
<!--        <if test="username != null and username != ''">-->
<!--            &lt;!&ndash;      模糊查询`SELECT * FROM customer where name like '%Logic%'`      &ndash;&gt;-->
<!--            AND username LIKE CONCAT('%', #{username}, '%')-->
<!--        </if>-->
<!--        <if test="jobs != null and username != ''">-->
<!--            AND jobs = #{jobs}-->
<!--        </if>-->
    </select>
</mapper>